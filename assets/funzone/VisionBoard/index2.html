<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vision Board</title>
    <link rel="stylesheet" href="style2.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <h1>Student Fun Zone - Vision Board</h1>
    
    <div class="toolbar">
        <button id="addNoteBtn">+ Post It</button>
        <button id="addImageBtn">+ Slika</button>
        <button id="addQuoteBtn">+ Citat</button>
        <button id="saveBtn">Snimi</button>
        <button id="savePdfBtn">Preuzmi PDF</button>
        <button id="sendEmailBtn">Pošalji mailom</button>
        <button id="clearBtn">Ocisti Plocu</button>
    </div>
    
    <div id="board" class="vision-board-content"></div>
    
    <!-- Clear Confirmation Modal -->
    <div id="clearModal" class="modal">
        <div class="modal-content">
            <h3>Očisti cijelu ploču?</h3>
            <p>Jeste li sigurni da želite očistiti cijelu ploču? Ova radnja se ne može poništiti!</p>
            <div class="modal-buttons">
                <button id="clearYes" style="background:#e74c3c;">Očisti</button>
                <button id="clearNo">Poništi</button>
            </div>
        </div>
    </div>
    
    <!-- Email Modal -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <h3>Pošalji Vision Board mailom</h3>
            <input type="email" id="emailInput" placeholder="Unesite email adresu..." />
            <div class="modal-buttons">
                <button id="emailSend">Pošalji</button>
                <button id="emailCancel">Poništi</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Web programiranje 2025 © Internacionalna poslovno-informaciona akademija Tuzla</p>
    </footer>
    
    <script src="javascript2.js"></script>
    <script>
       
        document.getElementById('savePdfBtn').addEventListener('click', () => {
            const element = document.getElementById('board');
            const options = {
                margin: 0.5,
                filename: 'Vision_Board.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    backgroundColor: '#ffffff'
                },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(options).from(element).save();
        });

        
        document.getElementById('sendEmailBtn').addEventListener('click', () => {
            document.getElementById('emailModal').style.display = 'block';
        });

        document.getElementById('emailCancel').addEventListener('click', () => {
            document.getElementById('emailModal').style.display = 'none';
            document.getElementById('emailInput').value = '';
        });

        document.getElementById('emailSend').addEventListener('click', () => {
            const email = document.getElementById('emailInput').value;
            if (email) {
                
                const notes = Array.from(document.querySelectorAll('.note')).map(note => 
                    `• Post It: ${note.textContent || note.innerText}`
                );
                
                const quotes = Array.from(document.querySelectorAll('.quote')).map(quote => 
                    `• Citat: ${quote.textContent || quote.innerText}`
                );
                
                const images = Array.from(document.querySelectorAll('.pinned-img')).map(img => 
                    `• Slika: ${img.querySelector('img')?.alt || 'Dodana slika'}`
                );

                
                const subject = 'Moj Vision Board';
                const body = `Moj Vision Board sadržaj:\n\n` +
                            `POST IT BILJEŠKE:\n${notes.length > 0 ? notes.join('\n') : 'Nema bilješki'}\n\n` +
                            `CITATI:\n${quotes.length > 0 ? quotes.join('\n') : 'Nema citata'}\n\n` +
                            `SLIKE:\n${images.length > 0 ? images.join('\n') : 'Nema slika'}\n\n` +
                            `\nPoslano sa Student Fun Zone Vision Board aplikacije.`;

                
                const mailtoLink = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                
               
                window.location.href = mailtoLink;
                
                
                document.getElementById('emailModal').style.display = 'none';
                document.getElementById('emailInput').value = '';
            } else {
                alert('Molimo unesite email adresu!');
            }
        });

       
        window.addEventListener('click', (event) => {
            const emailModal = document.getElementById('emailModal');
            if (event.target === emailModal) {
                emailModal.style.display = 'none';
                document.getElementById('emailInput').value = '';
            }
        });

        
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                document.getElementById('emailModal').style.display = 'none';
                document.getElementById('emailInput').value = '';
            }
        });
    </script>
</body>
</html>